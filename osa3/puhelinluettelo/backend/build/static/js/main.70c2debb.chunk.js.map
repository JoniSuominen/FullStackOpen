{"version":3,"sources":["components/Person.js","components/AddForm.js","components/Filter.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Person","props","react_default","a","createElement","name","numero","onClick","removePerson","AddForm","onSubmit","submit","value","onChange","handleName","number","handleNumber","type","Filter","_ref","handleFilterChange","filter","Notification","message","className","baseUrl","persons","getAll","axios","get","then","response","data","create","post","destroy","id","delete","concat","update","newObject","put","App","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleNameChange","event","setState","newName","target","handleNumberChange","newNumber","findName","state","person","toLowerCase","length","find","p","window","confirm","personServices","newPerson","lastOperation","operationType","setTimeout","catch","error","addName","preventDefault","nameObject","replaceNumber","prson","_this2","_this3","personsToShow","includes","components_Notification","components_Filter","components_AddForm","map","components_Person","key","React","Component","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.70c2debb.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Person = (props) => {\r\n    return (\r\n        <div>\r\n            {props.name} {props.numero}\r\n            <button onClick={props.removePerson}>poista</button>\r\n        </div>\r\n    )\r\n}\r\nexport default Person","import React from 'react'\r\n\r\n\r\nconst AddForm = (props) => {\r\n    return (\r\n        <div>\r\n            <h2>Lisää uusi</h2>\r\n        <form onSubmit={props.submit}>\r\n            nimi:\r\n            \r\n            <input\r\n            value = {props.name}\r\n            onChange = {props.handleName}\r\n            />\r\n\r\n            numero:\r\n            <input\r\n            value = {props.number}\r\n            onChange = {props.handleNumber}\r\n            />\r\n        <div>\r\n            <button type=\"submit\">Lisää</button>\r\n        </div>\r\n        </form>    \r\n        </div>      \r\n    )\r\n}\r\n\r\nexport default AddForm","import React from 'react'\r\n\r\nconst Filter = ({handleFilterChange, filter}) => {\r\n    return (\r\n        <div>\r\n            rajaa näytettäviä\r\n            <input\r\n            value={filter}\r\n            onChange={handleFilterChange}\r\n            />\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst Notification = ({message, type}) => {\r\n    if (message === null) {\r\n        return null\r\n    }\r\n    return (\r\n        <div className={type}>\r\n            {message}\r\n        </div>\r\n    )\r\n}\r\nexport default Notification","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    \r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst destroy = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`) \r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = (Person) => {\r\n    const request = axios.post(baseUrl, Person);\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\n\r\nexport default{getAll, create, destroy, update}","import React from 'react'\r\nimport Person from './components/Person'\r\nimport AddForm from './components/AddForm'\r\nimport Filter from './components/Filter'\r\nimport Notification from './components/Notification'\r\nimport './index.css'\r\nimport personServices from './services/persons'\r\n\r\n/*\r\n    The exercise assumes we can only have one person with a same name, thus name could have\r\n    probably been used as an id for components here, but I decided to give each person an Id.\r\n*/\r\nclass App extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            persons: [\r\n\r\n            ],\r\n            newName: '',\r\n            newNumber: '',\r\n            filter : '',\r\n            lastOperation : null,\r\n            operationType: null\r\n        }\r\n    }\r\n    \r\n    componentDidMount() {\r\n        personServices\r\n            .getAll()\r\n            .then(response => {\r\n                this.setState({persons: response})\r\n            })\r\n    }\r\n\r\n    handleNameChange = (event) => {\r\n        this.setState({newName: event.target.value})\r\n    }\r\n\r\n    handleNumberChange = (event) => {\r\n        this.setState({newNumber: event.target.value})\r\n    }\r\n\r\n    handleFilterChange = (event) => {\r\n        this.setState({filter: event.target.value})\r\n    }\r\n\r\n    findName = (name) => {\r\n        const person = this.state.persons.filter(person => person.name.toLowerCase() === name.toLowerCase())\r\n        return person.length > 0;\r\n    }\r\n\r\n    removePerson = (id) => {\r\n        return () => {\r\n            const person = this.state.persons.find(p => p.id === id)\r\n            if (!window.confirm(`poistetaanko ${person.name} `)) {\r\n                return;\r\n            }\r\n\r\n            personServices \r\n                .destroy(person.id)\r\n                .then(newPerson => {\r\n\r\n                    this.setState({\r\n                        persons: this.state.persons.filter(p => p.id !== id),\r\n                        lastOperation: `${person.name} poistettiin`,\r\n                        operationType: 'removal'\r\n                    })\r\n                    setTimeout(() => {\r\n                        this.setState({\r\n                            lastOperation: null,\r\n                            operationType: null\r\n                        })\r\n                      }, 3000)\r\n\r\n                })\r\n                .catch(error => {\r\n\r\n                    this.setState({\r\n                        persons: this.state.persons.filter(p => p.name !== person.name),\r\n                        lastOperation: `${person.name} on jo poistettu!`,\r\n                        operationType: 'removal'\r\n                    })\r\n                    setTimeout(()=> {\r\n                        this.setState({\r\n                            lastOperation: null,\r\n                            operationType: null\r\n                        })\r\n                    }, 3000)\r\n                })\r\n        }\r\n    }\r\n\r\n    addName = (event) => {\r\n        event.preventDefault()\r\n        const nameObject = {\r\n            name: this.state.newName,\r\n            number: this.state.newNumber,\r\n        }   \r\n        if (this.findName(this.state.newName)) {\r\n            if (!window.confirm(`${nameObject.name} on jo luettelossa, korvataanko vanha numero uudella?`)) {\r\n                return\r\n            }\r\n            this.replaceNumber(nameObject)\r\n            return\r\n        }  \r\n\r\n        personServices\r\n            .create(nameObject)\r\n            .then(newPerson => {\r\n                this.setState({\r\n                    persons: this.state.persons.concat(newPerson),\r\n                    lastOperation: `${this.state.newName} lisättiin`,\r\n                    operationType: 'creation',\r\n                    newName: '',\r\n                    newNumber: ''\r\n                })\r\n                setTimeout(() => {\r\n                    this.setState({\r\n                        lastOperation: null,\r\n                        operationType: null\r\n                    })\r\n                  }, 3000)\r\n            })\r\n    }\r\n\r\n    replaceNumber = (Person) => {\r\n        const prson = this.state.persons.find(p => p.name.toLowerCase() === Person.name.toLowerCase());\r\n        Person.name = prson.name;\r\n        personServices\r\n            .update(prson.id, Person)\r\n            .then(response => {\r\n                const person = this.state.persons.filter(p => p.id !== prson.id)\r\n                this.setState({\r\n                    persons: person.concat(response),\r\n                    lastOperation: `Henkilön ${prson.name} numero vaihdettiin`,\r\n                    operationType: 'creation',\r\n                    newName: '',\r\n                    newNumber: ''\r\n                })\r\n                setTimeout(() => {\r\n                    this.setState({\r\n                        lastOperation: null,\r\n                        operationType: null\r\n                    })\r\n                  }, 3000)\r\n            })\r\n        \r\n    }\r\n    render() {\r\n        const personsToShow = this.state.persons.filter(person => (person.name.toLowerCase()).includes(this.state.filter.toLowerCase()) || person.number.includes(this.state.filter)) \r\n        return (\r\n            <div>\r\n                <h2>Puhelinluettelo</h2>\r\n                <Notification message={this.state.lastOperation} type={this.state.operationType}/>\r\n                <Filter handleFilterChange={this.handleFilterChange} filter={this.filter}/>\r\n                <AddForm submit={this.addName} name={this.state.newName} handleName={this.handleNameChange} number={this.state.newNumber} handleNumber={this.handleNumberChange}/>\r\n                <h2>\r\n                    Numerot\r\n                </h2>\r\n                <div>\r\n                    {personsToShow.map(person => <Person key = {person.id} name={person.name} numero={person.number} removePerson={this.removePerson(person.id)}/>)}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default App","import ReactDOM from 'react-dom'\nimport React from 'react'\nimport App from './App'\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}
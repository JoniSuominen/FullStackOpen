(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,n){e.exports=n(42)},21:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(10),r=n.n(a),o=n(0),i=n.n(o),u=n(11),l=n(12),s=n(14),c=n(13),m=n(15),p=function(e){return i.a.createElement("div",null,e.name," ",e.numero,i.a.createElement("button",{onClick:e.removePerson},"poista"))},f=function(e){return i.a.createElement("div",null,i.a.createElement("h2",null,"Lis\xe4\xe4 uusi"),i.a.createElement("form",{onSubmit:e.submit},"nimi:",i.a.createElement("input",{value:e.name,onChange:e.handleName}),"numero:",i.a.createElement("input",{value:e.number,onChange:e.handleNumber}),i.a.createElement("div",null,i.a.createElement("button",{type:"submit"},"Lis\xe4\xe4"))))},d=function(e){var t=e.handleFilterChange,n=e.filter;return i.a.createElement("div",null,"rajaa n\xe4ytett\xe4vi\xe4",i.a.createElement("input",{value:n,onChange:t}))},h=function(e){var t=e.message,n=e.type;return null===t?null:i.a.createElement("div",{className:n},t)},v=(n(21),n(2)),b=n.n(v),w="/api/persons",N={getAll:function(){return b.a.get(w).then(function(e){return e.data})},create:function(e){return b.a.post(w,e).then(function(e){return e.data})},destroy:function(e){return b.a.delete("".concat(w,"/").concat(e)).then(function(e){return e.data})},update:function(e,t){return b.a.put("".concat(w,"/").concat(e),t).then(function(e){return e.data})}},E=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(s.a)(this,Object(c.a)(t).call(this,e))).handleNameChange=function(e){n.setState({newName:e.target.value})},n.handleNumberChange=function(e){n.setState({newNumber:e.target.value})},n.handleFilterChange=function(e){n.setState({filter:e.target.value})},n.findName=function(e){return n.state.persons.filter(function(t){return t.name.toLowerCase()===e.toLowerCase()}).length>0},n.removePerson=function(e){return function(){var t=n.state.persons.find(function(t){return t.id===e});window.confirm("poistetaanko ".concat(t.name," "))&&N.destroy(t.id).then(function(a){n.setState({persons:n.state.persons.filter(function(t){return t.id!==e}),lastOperation:"".concat(t.name," poistettiin"),operationType:"removal"}),setTimeout(function(){n.setState({lastOperation:null,operationType:null})},3e3)}).catch(function(e){n.setState({persons:n.state.persons.filter(function(e){return e.name!==t.name}),lastOperation:"".concat(t.name," on jo poistettu!"),operationType:"removal"}),setTimeout(function(){n.setState({lastOperation:null,operationType:null})},3e3)})}},n.addName=function(e){e.preventDefault();var t={name:n.state.newName,number:n.state.newNumber};if(n.findName(n.state.newName)){if(!window.confirm("".concat(t.name," on jo luettelossa, korvataanko vanha numero uudella?")))return;n.replaceNumber(t)}else N.create(t).then(function(e){n.setState({persons:n.state.persons.concat(e),lastOperation:"".concat(n.state.newName," lis\xe4ttiin"),operationType:"creation",newName:"",newNumber:""}),setTimeout(function(){n.setState({lastOperation:null,operationType:null})},3e3)})},n.replaceNumber=function(e){var t=n.state.persons.find(function(t){return t.name.toLowerCase()===e.name.toLowerCase()});e.name=t.name,N.update(t.id,e).then(function(e){var a=n.state.persons.filter(function(e){return e.id!==t.id});n.setState({persons:a.concat(e),lastOperation:"Henkil\xf6n ".concat(t.name," numero vaihdettiin"),operationType:"creation",newName:"",newNumber:""}),setTimeout(function(){n.setState({lastOperation:null,operationType:null})},3e3)})},n.state={persons:[],newName:"",newNumber:"",filter:"",lastOperation:null,operationType:null},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;N.getAll().then(function(t){e.setState({persons:t})})}},{key:"render",value:function(){var e=this,t=this.state.persons.filter(function(t){return t.name.toLowerCase().includes(e.state.filter.toLowerCase())||t.number.includes(e.state.filter)});return i.a.createElement("div",null,i.a.createElement("h2",null,"Puhelinluettelo"),i.a.createElement(h,{message:this.state.lastOperation,type:this.state.operationType}),i.a.createElement(d,{handleFilterChange:this.handleFilterChange,filter:this.filter}),i.a.createElement(f,{submit:this.addName,name:this.state.newName,handleName:this.handleNameChange,number:this.state.newNumber,handleNumber:this.handleNumberChange}),i.a.createElement("h2",null,"Numerot"),i.a.createElement("div",null,t.map(function(t){return i.a.createElement(p,{key:t.id,name:t.name,numero:t.number,removePerson:e.removePerson(t.id)})})))}}]),t}(i.a.Component);r.a.render(i.a.createElement(E,null),document.getElementById("root"))}},[[16,2,1]]]);
//# sourceMappingURL=main.70c2debb.chunk.js.map